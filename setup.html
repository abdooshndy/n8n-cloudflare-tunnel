<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n Easy Setup | Ø¥Ø¹Ø¯Ø§Ø¯ n8n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        input[type="text"],
        input[type="password"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            border-color: #667eea;
            background: #f5f7ff;
        }

        .radio-option.selected {
            border-color: #667eea;
            background: #f5f7ff;
        }

        .radio-option input[type="radio"] {
            margin-left: 10px;
        }

        .advanced {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .output {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
            display: none;
        }

        .output.show {
            display: block;
        }

        .output pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 13px;
            direction: ltr;
            text-align: left;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .steps {
            margin-top: 20px;
        }

        .step {
            padding: 15px;
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .step-num {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-left: 10px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸš€ n8n Easy Setup</h1>
        <p class="subtitle">Ø¥Ø¹Ø¯Ø§Ø¯ Ø³Ø±ÙŠØ¹ ÙˆØ³Ù‡Ù„ | Quick & Easy Configuration</p>

        <div id="form-section">
            <div class="form-group">
                <label>ğŸ‘¤ Username (Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)</label>
                <input type="text" id="username" value="admin" placeholder="admin">
            </div>

            <div class="form-group">
                <label>ğŸ”’ Password (ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±)</label>
                <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©">
            </div>

            <div class="form-group">
                <label>ğŸŒ Timezone (Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©)</label>
                <select id="timezone">
                    <option value="Africa/Cairo">Africa/Cairo (Ù…ØµØ±)</option>
                    <option value="Asia/Riyadh">Asia/Riyadh (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)</option>
                    <option value="Asia/Dubai">Asia/Dubai (Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª)</option>
                    <option value="Asia/Kuwait">Asia/Kuwait (Ø§Ù„ÙƒÙˆÙŠØª)</option>
                    <option value="Asia/Baghdad">Asia/Baghdad (Ø§Ù„Ø¹Ø±Ø§Ù‚)</option>
                    <option value="Europe/Istanbul">Europe/Istanbul (ØªØ±ÙƒÙŠØ§)</option>
                </select>
            </div>

            <div class="form-group">
                <label>ğŸ”— Tunnel Type (Ù†ÙˆØ¹ Ø§Ù„Ø§ØªØµØ§Ù„)</label>
                <div class="radio-group">
                    <div class="radio-option selected" onclick="selectTunnel('quick')">
                        <input type="radio" name="tunnel" value="quick" checked>
                        <strong>Quick Tunnel</strong><br>
                        <small>Ù…Ø¬Ø§Ù†ÙŠ - Ø¨Ø¯ÙˆÙ† domain</small>
                    </div>
                    <div class="radio-option" onclick="selectTunnel('named')">
                        <input type="radio" name="tunnel" value="named">
                        <strong>Named Tunnel</strong><br>
                        <small>Ù…Ø¹ domain Ø®Ø§Øµ</small>
                    </div>
                </div>
            </div>

            <div id="advanced-section" class="advanced">
                <div class="form-group">
                    <label>ğŸ”‘ Cloudflare Token</label>
                    <input type="text" id="cf-token" placeholder="eyJhIjoixxxxxx...">
                </div>
                <div class="form-group">
                    <label>ğŸŒ Domain</label>
                    <input type="text" id="domain" placeholder="n8n.yourdomain.com">
                </div>
            </div>

            <button class="btn btn-primary" onclick="generateConfig()">
                âœ… Generate Configuration | ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
        </div>

        <div id="output-section" class="output">
            <div class="alert alert-success">
                âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!
            </div>

            <div class="alert alert-info">
                <strong>ğŸš€ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© (Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§):</strong><br>
                1. Ø§Ø¶ØºØ· "Download .env" Ø£Ø¯Ù†Ø§Ù‡<br>
                2. Ø§Ø¶ØºØ· "Download Starter" Ø£Ø¯Ù†Ø§Ù‡<br>
                3. Ø´ØºÙ‘Ù„ Ù…Ù„Ù start-n8n.bat Ø§Ù„Ø°ÙŠ ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡
            </div>

            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="btn btn-primary" onclick="downloadEnv()" style="flex: 1;">
                    ğŸ“¥ Download .env File
                </button>
                <button class="btn btn-primary" onclick="downloadStarter()" style="flex: 1;">
                    ğŸš€ Download Starter Script
                </button>
            </div>

            <hr style="margin: 20px 0;">

            <div class="steps">
                <div class="step">
                    <span class="step-num">1</span>
                    <strong>Ø£Ùˆ Ø§Ù†Ø³Ø® Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø£Ø¯Ù†Ø§Ù‡ ÙŠØ¯ÙˆÙŠØ§Ù‹</strong>
                </div>
                <div class="step">
                    <span class="step-num">2</span>
                    <strong>Ø§ÙØªØ­ Notepad ÙˆØ£Ù„ØµÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</strong>
                </div>
                <div class="step">
                    <span class="step-num">3</span>
                    <strong>Ø§Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ø¨Ø§Ø³Ù… <code>.env</code> ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯</strong>
                </div>
                <div class="step">
                    <span class="step-num">4</span>
                    <strong>Ø´ØºÙ‘Ù„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø£Ø¯Ù†Ø§Ù‡ ÙÙŠ PowerShell</strong>
                </div>
            </div>

            <h3 style="margin-top: 20px; margin-bottom: 10px;">ğŸ“„ Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù .env</h3>
            <pre id="env-content"></pre>

            <h3 style="margin-top: 20px; margin-bottom: 10px;">ğŸ’» Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</h3>
            <pre id="commands"></pre>

            <button class="btn btn-primary" onclick="copyToClipboard('env-content')">
                ğŸ“‹ Copy .env Content
            </button>
        </div>
    </div>

    <script>
        function selectTunnel(type) {
            const options = document.querySelectorAll('.radio-option');
            options.forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            const advanced = document.getElementById('advanced-section');
            if (type === 'named') {
                advanced.style.display = 'block';
            } else {
                advanced.style.display = 'none';
            }
        }

        function generateConfig() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const timezone = document.getElementById('timezone').value;
            const tunnelType = document.querySelector('input[name="tunnel"]:checked').value;

            if (!password) {
                alert('âš ï¸ Please enter a password! | ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!');
                return;
            }

            let envContent = `# Generated by n8n Easy Setup\n`;
            envContent += `N8N_USER=${username}\n`;
            envContent += `N8N_PASSWORD=${password}\n`;
            envContent += `TIMEZONE=${timezone}\n\n`;

            let commands = `# 1. Download Docker images (first time only)\n`;
            commands += `.\\download-images.ps1\n\n`;

            if (tunnelType === 'quick') {
                envContent += `# Quick Tunnel Mode\n`;
                envContent += `N8N_HOST=quick-tunnel\n`;
                envContent += `WEBHOOK_URL=http://localhost\n`;
                commands += `# 2. Start n8n with Quick Tunnel\n`;
                commands += `docker-compose --profile quick-tunnel up -d\n\n`;
                commands += `# 3. Get URL (after 10 seconds)\n`;
                commands += `.\\get-url.ps1\n`;
            } else {
                const token = document.getElementById('cf-token').value;
                const domain = document.getElementById('domain').value;

                if (!token || !domain) {
                    alert('âš ï¸ Token and Domain required! | Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ù†Ø·Ø§Ù‚ Ù…Ø·Ù„ÙˆØ¨Ø§Ù†!');
                    return;
                }

                envContent += `# Named Tunnel Mode\n`;
                envContent += `N8N_HOST=${domain}\n`;
                envContent += `WEBHOOK_URL=https://${domain}\n`;
                envContent += `CLOUDFLARE_TUNNEL_TOKEN=${token}\n`;
                commands += `# 2. Start n8n with Named Tunnel\n`;
                commands += `docker-compose --profile named-tunnel up -d\n\n`;
                commands += `# 3. Access at:\n`;
                commands += `# https://${domain}\n`;
            }

            document.getElementById('env-content').textContent = envContent;
            document.getElementById('commands').textContent = commands;
            document.getElementById('output-section').classList.add('show');
            document.getElementById('form-section').style.display = 'none';
        }

        function downloadEnv() {
            const content = document.getElementById('env-content').textContent;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '.env';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù .env!\n\nØ¶Ø¹Ù‡ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø¹ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.\n\nâœ… .env file downloaded!\n\nPlace it in the same folder with project files.');
        }

        function downloadStarter() {
            const tunnelType = document.querySelector('input[name="tunnel"]:checked').value;
            let profile = tunnelType === 'quick' ? 'quick-tunnel' : 'named-tunnel';

            let starterContent = `@echo off
REM ================================================
REM n8n Auto Starter
REM Ù…Ø´ØºÙ„ n8n Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
REM ================================================

chcp 65001 >nul
cls

echo ============================================
echo n8n Auto Starter
echo Ù…Ø´ØºÙ„ n8n Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
echo ============================================
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Docker
docker --version >nul 2>&1
if errorlevel 1 (
    echo âŒ Docker Desktop not running!
    echo âŒ Docker Desktop ØºÙŠØ± Ù…Ø´ØºÙ„!
    echo.
    echo Please start Docker Desktop first.
    echo ÙŠØ±Ø¬Ù‰ ØªØ´ØºÙŠÙ„ Docker Desktop Ø£ÙˆÙ„Ø§Ù‹.
    pause
    exit /b 1
)

echo âœ… Docker is running
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„Ù .env
if not exist ".env" (
    echo âŒ .env file not found!
    echo âŒ Ù…Ù„Ù .env ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!
    echo.
    echo Please place the .env file in this folder.
    echo ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ù…Ù„Ù .env ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ù„Ø¯.
    pause
    exit /b 1
)

echo âœ… .env file found
echo.

REM ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± (Ø£ÙˆÙ„ Ù…Ø±Ø©)
echo ğŸ“¦ Checking Docker images...
echo ğŸ“¦ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙˆØ± Docker...
echo.

docker image inspect n8nio/n8n:latest >nul 2>&1
if errorlevel 1 (
    echo â¬‡ï¸  Downloading n8n image (first time only)...
    echo â¬‡ï¸  ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© n8n (Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙ‚Ø·)...
    echo.
    echo This may take 5-10 minutes...
    echo Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ 5-10 Ø¯Ù‚Ø§Ø¦Ù‚...
    echo.
    docker pull n8nio/n8n:latest
)

docker image inspect cloudflare/cloudflared:latest >nul 2>&1
if errorlevel 1 (
    echo â¬‡ï¸  Downloading Cloudflare image (first time only)...
    echo â¬‡ï¸  ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Cloudflare (Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙ‚Ø·)...
    echo.
    docker pull cloudflare/cloudflared:latest
)

echo.
echo âœ… Images ready
echo âœ… Ø§Ù„ØµÙˆØ± Ø¬Ø§Ù‡Ø²Ø©
echo.

REM ØªØ´ØºÙŠÙ„ n8n
echo ğŸš€ Starting n8n...
echo ğŸš€ ØªØ´ØºÙŠÙ„ n8n...
echo.

docker-compose --profile ${profile} up -d

if errorlevel 1 (
    echo.
    echo âŒ Failed to start!
    echo âŒ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„!
    pause
    exit /b 1
)

echo.
echo âœ… n8n started successfully!
echo âœ… ØªÙ… ØªØ´ØºÙŠÙ„ n8n Ø¨Ù†Ø¬Ø§Ø­!
echo.

`;

            if (tunnelType === 'quick') {
                starterContent += `echo ğŸ”— Getting your URL...
echo ğŸ”— Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø·Ùƒ...
echo.
echo Please wait 10 seconds...
echo ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 10 Ø«ÙˆØ§Ù†...
timeout /t 10 /nobreak >nul
echo.

powershell -ExecutionPolicy Bypass -Command "docker-compose logs cloudflared-quick-tunnel 2>&1 | Select-String -Pattern 'https://[a-zA-Z0-9.-]*\\.trycloudflare\\.com' | Select-Object -Last 1"

echo.
echo ============================================
echo If URL not shown above, wait 10 more seconds and run:
echo Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¹Ù„Ø§Ù‡ØŒ Ø§Ù†ØªØ¸Ø± 10 Ø«ÙˆØ§Ù† ÙˆØ´ØºÙ‘Ù„:
echo.
echo   .\\get-url.ps1
echo.
`;
            } else {
                const domain = document.getElementById('domain').value;
                starterContent += `echo ============================================
echo âœ… All Done!
echo âœ… ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!
echo ============================================
echo.
echo ğŸŒ Access n8n at:
echo ğŸŒ Ø§ÙØªØ­ n8n Ø¹Ù„Ù‰:
echo.
echo    https://${domain}
echo.
`;
            }

            starterContent += `echo ============================================
echo.
pause
`;

            const blob = new Blob([starterContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'start-n8n.bat';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù start-n8n.bat!\n\nØ¶Ø¹Ù‡ Ù…Ø¹ Ù…Ù„Ù .env Ø«Ù…:\n1. Ø§Ù†Ù‚Ø± Ù†Ù‚Ø±Ø§Ù‹ Ù…Ø²Ø¯ÙˆØ¬Ø§Ù‹ Ø¹Ù„Ù‰ start-n8n.bat\n2. Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ†ØªÙ‡ÙŠ\n3. Ø§Ø³ØªÙ…ØªØ¹!\n\nâœ… Downloaded start-n8n.bat!\n\nPlace it with .env then:\n1. Double-click start-n8n.bat\n2. Wait for completion\n3. Enjoy!');
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… Copied! | ØªÙ… Ø§Ù„Ù†Ø³Ø®!');
            });
        }
    </script>

    <div style="text-align: center; margin-top: 30px; color: #666; font-size: 12px;">
        <p>v1.3.0 Hybrid Edition</p>
        <p><a href="https://github.com/abdooshndy/n8n-cloudflare-tunnel" target="_blank"
                style="color: #667eea; text-decoration: none;">View on GitHub</a></p>
    </div>
</body>

</html>